---
title: "DLL_2"
categories: 
  - 해킹
  - 리버싱
  - 프로그래밍

last_modified_at: 2019-04-30T00:00:00+09:00
toc: true
toc_label: "목차" # toc 이름 정의
toc_icon: "cog" #font Awesome아이콘으로 toc 아이콘 설정
toc_sticky: true # 스크롤 내릴때 같이 내려가는 목차
---

# DLL 생성 및 사용 예제

## DLL 생성

```c++
#include <stdio.h>
#include <windows.h>

BOOL APIENTRY DllMain( HANDLE hModule, 
                       DWORD  ul_reason_for_call, 
                       LPVOID lpReserved
					 )
{

	printf ("WHAT\n");
    return TRUE;
}



extern "C" __declspec(dllexport) void Hello(){
	printf ("Hello, World!\n");
}
```



## DLL 사용



```c++
#include <stdio.h>
#include <conio.h>
#include <windows.h>

typedef void (*PFN_Hello) ();

int main() {
	HMODULE hDll = NULL;
	PFN_Hello Func_Hello = NULL;


	hDll = LoadLibraryA("myhack.dll");
	if(hDll == NULL) {
		printf ("Dll Wasn't Loaded!\n");
		return 0;
	}
	printf ("hDll %d\n", hDll);

	

	Func_Hello = (PFN_Hello)GetProcAddress(hDll, "Hello");
	printf ("0x%08x\n", Func_Hello);
	Func_Hello();
	return 0;
}



```



## 결과 창

```
WHAT
hDll 268435456
0x10001020
Hello, World!
WHAT
```

